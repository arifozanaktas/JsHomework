<!DOCTYPE html>
<html lang="tr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0">
    <title>Practice 3 | Arif Ozan Aktaş</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
</head>

<body class="bg-light">
    <div class="container py-4">
        <!-- APP Start -->
        <div id="app">
            <div class="row justify-content-center">
                <div class="col-md-10">
                    <!-- Dashboard Start -->
                    <div class="bg-white border p-4 shadow-sm">
                        <div class="row g-4">
                            <div class="col-lg-6">
                                <div class="input-group input-group-lg">
                                    <div class="form-control text-secondary rounded-0">
                                        Gösterilen içerik sayısı
                                    </div>
                                    <span id="count" class="input-group-text rounded-0">
                                        0
                                    </span>
                                </div>
                            </div>
                            <div class="col-lg-6">
                                <button type="button" onclick="load()" class="btn btn-success btn-lg w-100 rounded-0">
                                    <i class="bi bi-cloud-arrow-up-fill me-2"></i>İçerikleri Yükle
                                </button>
                            </div>
                        </div>
                    </div>
                    <!-- Dashboard End -->
                    <!-- Contents Start -->
                    <div id="contentsArea" class="bg-white border p-4 shadow-sm mt-4">
                        <div class="alert alert-warning rounded-0 mb-0" role="alert">
                            <b>Uyarı:</b> Gösterilebilecek içerik bulunamadı !!!
                        </div>
                    </div>
                    <!-- Contents End -->
                </div>
            </div>
        </div>
        <!-- APP End -->
    </div>

    <!-- Modal Start -->
    <div id="modalDetails" class="modal show" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">
                        Detay Bilgileri
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body p-3">
                    <!-- General Information Start -->
                    <div class="row g-3">
                        <div class="col-lg-6">
                            <label for="outputName" class="form-label">
                                Ad Soyad
                            </label>
                            <div id="outputName" class="form-control">
                                --
                            </div>
                        </div>
                        <div class="col-lg-6">
                            <label for="outputUserName" class="form-label">
                                Kullanıcı Adı
                            </label>
                            <div id="outputUserName" class="form-control">
                                --
                            </div>
                        </div>
                        <div class="col-lg-4">
                            <label for="outputPhone" class="form-label">
                                Telefon
                            </label>
                            <div id="outputPhone" class="form-control">
                                --
                            </div>
                        </div>
                        <div class="col-lg-4">
                            <label for="outputEmail" class="form-label">
                                E-Posta
                            </label>
                            <div id="outputEmail" class="form-control">
                                --
                            </div>
                        </div>
                        <div class="col-lg-4">
                            <label for="outputWebsite" class="form-label">
                                Web Sitesi
                            </label>
                            <div id="outputWebsite" class="form-control">
                                --
                            </div>
                        </div>
                    </div>
                    <!-- General Information End -->
                    <!-- Company and Address Information Start -->
                    <div class="accordion mt-3" id="accordionDetails">
                        <div class="accordion-item">
                            <h2 class="accordion-header">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="false" aria-controls="collapseOne">
                                    Şirket Bilgileri
                                </button>
                            </h2>
                            <div id="collapseOne" class="accordion-collapse collapse" data-bs-parent="#accordionDetails">
                                <div class="accordion-body p-3">
                                    <div class="row g-3">
                                        <div class="col-12">
                                            <label for="outputCompanyName" class="form-label">
                                                Şirket Adı
                                            </label>
                                            <div id="outputCompanyName" class="form-control">
                                                --
                                            </div>
                                        </div>
                                        <div class="col-12">
                                            <label for="outputCatchPhrase" class="form-label">
                                                catchPhrase
                                            </label>
                                            <div id="outputCatchPhrase" class="form-control">
                                                --
                                            </div>
                                        </div>
                                        <div class="col-12">
                                            <label for="outputBS" class="form-label">
                                                BS
                                            </label>
                                            <div id="outputBS" class="form-control">
                                                --
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="accordion-item">
                            <h2 class="accordion-header">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                                    Adres Bilgileri
                                </button>
                            </h2>
                            <div id="collapseTwo" class="accordion-collapse collapse" data-bs-parent="#accordionDetails">
                                <div class="accordion-body p-3">
                                    <div class="row g-3">
                                        <div class="col-12">
                                            <div id="googleMap"></div>
                                        </div>
                                        <div class="col-12">
                                            <label for="outputAddress" class="form-label">
                                                Adres
                                            </label>
                                            <div id="outputAddress" class="form-control">
                                                --
                                            </div>
                                        </div>
                                        <div class="col-lg-6">
                                            <label for="outputCity" class="form-label">
                                                Şehir
                                            </label>
                                            <div id="outputCity" class="form-control">
                                                --
                                            </div>
                                        </div>
                                        <div class="col-lg-6">
                                            <label for="outputZipCode" class="form-label">
                                                Posta Kodu
                                            </label>
                                            <div id="outputZipCode" class="form-control">
                                                --
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- Company and Address Information End -->
                </div>
            </div>
        </div>
    </div>
    <!-- Modal End -->

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <script>

        var users = [
            {
                "id": 1,
                "name": "Leanne Graham",
                "username": "Bret",
                "email": "Sincere@april.biz",
                "address": {
                    "street": "Kulas Light",
                    "suite": "Apt. 556",
                    "city": "Gwenborough",
                    "zipcode": "92998-3874",
                    "geo": {
                        "lat": "-37.3159",
                        "lng": "81.1496"
                    }
                },
                "phone": "1-770-736-8031 x56442",
                "website": "hildegard.org",
                "company": {
                    "name": "Romaguera-Crona",
                    "catchPhrase": "Multi-layered client-server neural-net",
                    "bs": "harness real-time e-markets"
                }
            },
            {
                "id": 2,
                "name": "Ervin Howell",
                "username": "Antonette",
                "email": "Shanna@melissa.tv",
                "address": {
                    "street": "Victor Plains",
                    "suite": "Suite 879",
                    "city": "Wisokyburgh",
                    "zipcode": "90566-7771",
                    "geo": {
                        "lat": "-43.9509",
                        "lng": "-34.4618"
                    }
                },
                "phone": "010-692-6593 x09125",
                "website": "anastasia.net",
                "company": {
                    "name": "Deckow-Crist",
                    "catchPhrase": "Proactive didactic contingency",
                    "bs": "synergize scalable supply-chains"
                }
            },
            {
                "id": 3,
                "name": "Clementine Bauch",
                "username": "Samantha",
                "email": "Nathan@yesenia.net",
                "address": {
                    "street": "Douglas Extension",
                    "suite": "Suite 847",
                    "city": "McKenziehaven",
                    "zipcode": "59590-4157",
                    "geo": {
                        "lat": "-68.6102",
                        "lng": "-47.0653"
                    }
                },
                "phone": "1-463-123-4447",
                "website": "ramiro.info",
                "company": {
                    "name": "Romaguera-Jacobson",
                    "catchPhrase": "Face to face bifurcated interface",
                    "bs": "e-enable strategic applications"
                }
            },
            {
                "id": 4,
                "name": "Patricia Lebsack",
                "username": "Karianne",
                "email": "Julianne.OConner@kory.org",
                "address": {
                    "street": "Hoeger Mall",
                    "suite": "Apt. 692",
                    "city": "South Elvis",
                    "zipcode": "53919-4257",
                    "geo": {
                        "lat": "29.4572",
                        "lng": "-164.2990"
                    }
                },
                "phone": "493-170-9623 x156",
                "website": "kale.biz",
                "company": {
                    "name": "Robel-Corkery",
                    "catchPhrase": "Multi-tiered zero tolerance productivity",
                    "bs": "transition cutting-edge web services"
                }
            },
            {
                "id": 5,
                "name": "Chelsey Dietrich",
                "username": "Kamren",
                "email": "Lucio_Hettinger@annie.ca",
                "address": {
                    "street": "Skiles Walks",
                    "suite": "Suite 351",
                    "city": "Roscoeview",
                    "zipcode": "33263",
                    "geo": {
                        "lat": "-31.8129",
                        "lng": "62.5342"
                    }
                },
                "phone": "(254)954-1289",
                "website": "demarco.info",
                "company": {
                    "name": "Keebler LLC",
                    "catchPhrase": "User-centric fault-tolerant solution",
                    "bs": "revolutionize end-to-end systems"
                }
            },
            {
                "id": 6,
                "name": "Mrs. Dennis Schulist",
                "username": "Leopoldo_Corkery",
                "email": "Karley_Dach@jasper.info",
                "address": {
                    "street": "Norberto Crossing",
                    "suite": "Apt. 950",
                    "city": "South Christy",
                    "zipcode": "23505-1337",
                    "geo": {
                        "lat": "-71.4197",
                        "lng": "71.7478"
                    }
                },
                "phone": "1-477-935-8478 x6430",
                "website": "ola.org",
                "company": {
                    "name": "Considine-Lockman",
                    "catchPhrase": "Synchronised bottom-line interface",
                    "bs": "e-enable innovative applications"
                }
            },
            {
                "id": 7,
                "name": "Kurtis Weissnat",
                "username": "Elwyn.Skiles",
                "email": "Telly.Hoeger@billy.biz",
                "address": {
                    "street": "Rex Trail",
                    "suite": "Suite 280",
                    "city": "Howemouth",
                    "zipcode": "58804-1099",
                    "geo": {
                        "lat": "24.8918",
                        "lng": "21.8984"
                    }
                },
                "phone": "210.067.6132",
                "website": "elvis.io",
                "company": {
                    "name": "Johns Group",
                    "catchPhrase": "Configurable multimedia task-force",
                    "bs": "generate enterprise e-tailers"
                }
            },
            {
                "id": 8,
                "name": "Nicholas Runolfsdottir V",
                "username": "Maxime_Nienow",
                "email": "Sherwood@rosamond.me",
                "address": {
                    "street": "Ellsworth Summit",
                    "suite": "Suite 729",
                    "city": "Aliyaview",
                    "zipcode": "45169",
                    "geo": {
                        "lat": "-14.3990",
                        "lng": "-120.7677"
                    }
                },
                "phone": "586.493.6943 x140",
                "website": "jacynthe.com",
                "company": {
                    "name": "Abernathy Group",
                    "catchPhrase": "Implemented secondary concept",
                    "bs": "e-enable extensible e-tailers"
                }
            },
            {
                "id": 9,
                "name": "Glenna Reichert",
                "username": "Delphine",
                "email": "Chaim_McDermott@dana.io",
                "address": {
                    "street": "Dayna Park",
                    "suite": "Suite 449",
                    "city": "Bartholomebury",
                    "zipcode": "76495-3109",
                    "geo": {
                        "lat": "24.6463",
                        "lng": "-168.8889"
                    }
                },
                "phone": "(775)976-6794 x41206",
                "website": "conrad.com",
                "company": {
                    "name": "Yost and Sons",
                    "catchPhrase": "Switchable contextually-based project",
                    "bs": "aggregate real-time technologies"
                }
            },
            {
                "id": 10,
                "name": "Clementina DuBuque",
                "username": "Moriah.Stanton",
                "email": "Rey.Padberg@karina.biz",
                "address": {
                    "street": "Kattie Turnpike",
                    "suite": "Suite 198",
                    "city": "Lebsackbury",
                    "zipcode": "31428-2261",
                    "geo": {
                        "lat": "-38.2386",
                        "lng": "57.2232"
                    }
                },
                "phone": "024-648-3804",
                "website": "ambrose.net",
                "company": {
                    "name": "Hoeger LLC",
                    "catchPhrase": "Centralized empowering task-force",
                    "bs": "target end-to-end models"
                }
            }
        ];

        // Kullanıcıları göstermek için kullanılacak dizi
        var showUsers = [];

        // Modal detayları için bir modal nesnesi oluştur
        const modalDetails = new bootstrap.Modal('#modalDetails');
    
        // Kullanıcıları yükleyen ve tabloya yerleştiren fonksiyon.
        function load()
        {
            // Eğer kullanıcılar varsa devam et
            if(users.length > 0)
            {
                var i = 1;
                var table = '';

                // users dizisini rastgele sırayla karıştırma
                users.sort(function() {
                    return 0.5 - Math.random();
                });

                // Gösterilecek kullanıcılar listesine tüm kullanıcıları ekleyin
                showUsers = showUsers.concat(users);
    
                // Tablo HTML'ini oluştur
                table += `<div class="table-responsive">
                    <table class="table table-bordered mb-0">
                        <thead>
                            <tr class="table-secondary">
                                <th class="text-center align-middle text-secondary" scope="col">
                                    #
                                </th>
                                <th class="text-center align-middle text-secondary" scope="col">
                                    Ad Soyad
                                </th>
                                <th class="text-center align-middle text-secondary" scope="col">
                                    Email
                                </th>
                                <th class="text-center align-middle text-secondary" scope="col">
                                    Şehir
                                </th>
                                <th class="text-center align-middle text-secondary" scope="col">
                                    Detaylar
                                </th>
                            </tr>
                        </thead>
                        <tbody>`;
    
                // Her bir kullanıcı için bir tablo satırı oluştur
                showUsers.forEach(function (user) {
    
                    table += `<tr class="table-light">
                        <th class="text-center align-middle text-secondary" scope="row">
                            ${i}
                        </th>
                        <td class="text-center align-middle text-secondary">
                            ${user.name}
                        </td>
                        <td class="text-center align-middle text-secondary">
                            ${user.email}
                        </td>
                        <td class="text-center align-middle text-secondary">
                            ${user.address.city}
                        </td>
                        <td class="text-center align-middle">
                            <button onclick="showDetails(${user.id})" type="button" class="btn btn-primary btn-sm w-100 rounded-0">
                                Göster
                            </button>
                        </td>
                    </tr>`;
    
                    i++;
    
                });
    
                // Tablo HTML'ini tamamla
                table += `</tbody>
                    </table>
                </div>`;

                // Tablo içeriğini yerleştir
                document.getElementById('contentsArea').innerHTML = table;

                 // Toplam kullanıcı sayısını göster
                document.getElementById('count').innerHTML = (i - 1);
            }
    
        }

        // Kullanıcı detaylarını göstermek için kullanılan fonksiyon.
        // Verilen bir kullanıcı kimlik numarasına (id) göre kullanıcı detaylarını alır ve HTML içeriğine yerleştirir.
        // Ayrıca, modalı gösterir.
        function showDetails(id)
        {
            // Kullanıcıyı bul
            var getUser = users.find(function(user) {
                return user.id === id;
            });

            // Genel Bilgiler
            document.getElementById('outputName').innerHTML = getUser.name;
            document.getElementById('outputUserName').innerHTML = getUser.username;
            document.getElementById('outputPhone').innerHTML = getUser.phone;
            document.getElementById('outputEmail').innerHTML = getUser.email;
            document.getElementById('outputWebsite').innerHTML = getUser.website;

            // Şirket Bilgileri
            document.getElementById('outputCompanyName').innerHTML = getUser.company.name;
            document.getElementById('outputCatchPhrase').innerHTML = getUser.company.catchPhrase;
            document.getElementById('outputBS').innerHTML = getUser.company.bs;

            // Adres Bilgileri
            document.getElementById('outputAddress').innerHTML = getUser.address.street + ', ' + getUser.address.suite;
            document.getElementById('outputCity').innerHTML = getUser.address.city;
            document.getElementById('outputZipCode').innerHTML = getUser.address.zipcode;

            // Google Haritaları iframe'i oluştur
            document.getElementById('googleMap').innerHTML = `<iframe width="100%" height="200" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" src="https://maps.google.com/maps?q=${getUser.address.geo.lat},${getUser.address.geo.lng}&hl=tr;z=5&amp;output=embed"></iframe>`;

            // Modalı göster
            modalDetails.show();
        }

        // Modal kapatıldığında, modal içeriğini sıfırlayarak ve accordion bileşenlerini kapatılarak modalın temizlenmesini sağla
        document.getElementById('modalDetails').addEventListener('hidden.bs.modal', event => {

            // Genel Bilgiler
            document.getElementById('outputName').innerHTML = '--';
            document.getElementById('outputUserName').innerHTML = '--';
            document.getElementById('outputPhone').innerHTML = '--';
            document.getElementById('outputEmail').innerHTML = '--';
            document.getElementById('outputWebsite').innerHTML = '--';

            // Şirket Bilgileri
            document.getElementById('outputCompanyName').innerHTML = '--';
            document.getElementById('outputCatchPhrase').innerHTML = '--';
            document.getElementById('outputBS').innerHTML = '--';

            // Adres Bilgileri
            document.getElementById('outputAddress').innerHTML = '--';
            document.getElementById('outputCity').innerHTML = '--';
            document.getElementById('outputZipCode').innerHTML = '--';
            document.getElementById('googleMap').innerHTML = '';

            // accordion-button sınıfına sahip tüm butonları seç
            var buttons = document.querySelectorAll('#accordionDetails .accordion-button');

            // Seçilen her buton için döngü başlat 
            buttons.forEach(function(button) {

                 // Eğer buton collapsed sınıfına sahip değilse (yani açık durumdaysa)
                if(!button.classList.contains('collapsed'))
                {
                    // Butona collapsed sınıfını ekle (yani butonu kapat)
                    button.classList.add('collapsed');
                }
            });

            // Accordion bileşenindeki tüm collapse elementlerini bul
            var collapses = document.querySelectorAll('#accordionDetails .accordion-collapse');

            // Her collapse elementini kontrol et
            collapses.forEach(function(collapse) {
                // Açık olan collapse elementlerini kapat
                if(collapse.classList.contains('show'))
                {
                    // Collapse elementini kapatabilmek için bootstrap collapse metodu kullanılır
                    // Açık olan collapse elementlerini kapamak için show class'ını kaldırırız
                    collapse.classList.remove('show');
                }
            });

        });
    
    </script>
</body>

</html>